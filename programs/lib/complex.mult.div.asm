
# Bendix subroutine - Complex Multiplication
# Prepared by: D. Stein, S. H. Lewis #1205
# Date: 3-13-1957
# Line: 01
# Multiplication
#   Calculates:
#       (x + yi) = (a + bi) * (c + di)
#   Entry:  40
#   Exit:   38
#   Input:
#      10^-2d -> 22.00
#      10^-2c -> 22.01
#      10^-2b -> 22.02
#      10^-2a -> 22.03
#      Return Command
#           Normal 21.02
#           Overflow 21.03
#   Output:
#      10^-2y -> 20.00
#      10^-2x -> 20.01
#
# https://rbk.delosent.com/allq/Q5531.pdf Page 53
# Dave Green archive: David-Green-Files\kimpel\1205A.G15
# Corrections to the bendix publications are noted in
# comments, these were in the David Green Files
#
# Multiplication seems to work
# Division untested.
#
# Transcribed: Bill Kuker 3/13/2025
#
# 
.40 .  .42.44.6.22.25      ID(1):=22.02  =(10^-2)b
.44 . u.46.47.0.22.24      MQ(1):=22.01  =(10^-2)c
.47 .  .56.u4.0.24.31      PN = (10^-4)bc
.u4 .  .u6.02.4.26.20      20.02.03:=PN(0.1)
.02 .  .04.06.6.22.25      ID(1):=22.00  =(10^-2)d
.06 . u.08.09.0.22.24      MQ(1):=22.03  =(10^-2)a
.09 .  .56.66.0.24.31      PN = (10^-4)ad
.66 .  .68.70.4.26.21      21.00.01:=PN(0.1)
.70 .  .72.76.5.21.26      PN(0.1):=21.00.01
.76 .  .78.80.5.20.30      PN:=PN+20.02.03  =(10^-4)(ad+bc)
.80 .  .82.84.5.26.20      20.02.03:=PN(0.1)
.84 .  .86.88.4.20.25      ID(0.1):=20.02.03
.88 . u.90.91.0.01.24      MQ(1):=01.89  =10^2(2^-7)
.89 +w800000                10^2(2^-7)
.91 .  .10.01.0.24.31      PN:=(10^-2)(2^-7)(ad+bc)

# Typo?
# From Scan:
#01 .  .16.18.?.??.??   2^?? *? |PN| -> PN0,1+
# From David Green:
.01 . u.16.18.6.26.30      PN:=(10^-2)(ad+bc)


.18 . u.21.22.2.26.20      20.00:=PN(1)  =(10^-2)y
.22 .  .24.26.0.23.31      clear (even)
.26 . u.28.28.0.22.25      ID(1):=22.03  =(10^-2)a
.28 . u.30.31.0.22.24      MQ(1):=22.01  =(10^-2)c
.31 .  .56.92.0.24.31      =(10^-4)ac
.92 .  .94.96.4.26.20      20.02.03:=PN(0.1)
.96 .  .98.u0.6.22.25      ID(1):=22.02  =(10^-2)b
.u0 .  .u4.05.6.22.24      MQ(1):=22.00  =(10^-2)d
.05 .  .56.62.0.24.31      =(10^-4)bd

# Typo?
#From Scan:
#62 .  .66.68.0.2?.2?   10^-4bd * (PN0,1) -> 21.00,01
# From David Green:
.62 .  .64.68.4.26.21      21.00.01:=PN(0.1)

.68 .  .70.74.5.20.26      PN(0.1):=20.02.03
.74 .  .76.78.7.21.30      PN:=PN-21.00.01
.78 .  .80.82.5.26.21      21.00.01:=PN(0.1)
.82 .  .84.86.4.21.25      ID(0.1):=21.00.01
.86 .  .89.93.0.01.24      MQ(1):=01.89  =10^2(2^-7)
.93 .  .10.03.0.24.31      

# Typo?
#From Scan - Very clear
#.03 .  .18.20.6.26.30
#From David Green
.03 . u.18.20.6.26.30      

.20 . u.22.24.0.26.20      20.01:=PN(1)  =(10^-2)x
.24 .  .26.33.0.29.31      overflow?
.33 . u.35.36.0.21.28    no:  AR:=21.02
.34 . u.36.36.0.21.28    yes: AR:=21.03
.36 .  .38.38.0.31.31      execute AR (exit)

# Complex Division 
.35 .  .38.38.0.23.31      clear
.38 .  .40.41.2.22.28      AR:=21.00  =(10^-2)abs(d)
.41 . u.43.43.0.28.20      20.02:=AR
.43 .  .45.48.2.22.28      AR:=22.01  =(10^-2)abs(c)
.48 .  .50.51.3.20.29      AR:=AR-20.02  =abs(c)-abs(d)
.51 .  .53.54.0.22.31      is AR negative?
.54 .  .57.83.0.22.25    +ve: (c>=d) ID(1):=22.01  =(10^-2)c
.55 . u.61.63.2.22.22    -ve: (c<d)  22.01-00:=22.00-03
.63 . u.65.65.3.22.28      AR:=-22.00
.65 . u.67.69.3.22.30      PN(0):=22.02
.69 . u.71.72.1.28.22      22.02:=AR
.72 .  .76.77.1.26.22      22.00:=PN(0)
.77 .  .81.83.0.22.25      ID(1):=22.01
.83 .  .84.87.6.22.26      PN(1):=22.00 tva
.87 .  .56.39.5.25.31      divide
.39 . u.41.45.0.24.21      21.00:=MQ(0)
.45 .  .48.50.6.21.25      ID(1):=21.00 tva
.50 .  .52.61.6.22.24      MQ(1):=22.00 tva
.61 .  .56.10.0.24.31      multiply
.10 .  .12.16.4.26.20      20.00.01:=PN(0.1)
.16 .  .19.19.0.23.31      clear
.19 .  .21.23.0.22.25      ID(1):=22.01
.23 .  .02.29.0.26.31      shift 1 bit
.29 .  .32.37.4.25.20      20.02.03:=ID(0.1)
.37 . u.42.42.5.20.30      PN(0.1):=20.00.01+20.02.03
.42 .  .44.46.5.26.22      22.00.01:=PN(0.1)  =denominator
.46 .  .48.52.6.21.25      ID(1):=21.00 tva
.52 .  .54.57.6.22.24      MQ(1):=22.02 tva
.57 .  .56.07.0.24.31      multiply
.07 .  .10.11.4.26.20      20.00.01:=PN(0.1)
.11 .  .14.14.0.23.31      clear
.14 . u.16.17.0.22.25      ID(1):=22.03
.17 .  .02.21.0.26.31      shift
.21 . u.24.25.4.25.20      20.02.03:=ID(0.1)
.25 . u.30.32.5.20.30      PN(0.1):=20.02.03+20.00.01
.32 .  .34.49.5.26.20      20.02.03:=PN(0.1)
.49 .  .52.58.4.20.25      ID(0.1):=20.02.03
.58 .  .81.99.1.01.24      MQ(1):=01.88  =10^-2
.81 -zx70u3y.
.99 .  .58.53.0.24.31      multiply
.53 . u.56.56.4.26.20      20.02.03:=PN(0.1)
.56 .  .60.64.4.22.25      ID(0.1):=22.00.01  =denominator
.64 .  .66.15.4.20.26      PN(0.1):=20.02.03
.15 .  .58.90.5.25.31      divide
.90 .  .92.94.1.24.27      test for zero
.94 .  .96.98.6.24.20    yes: 20.01:=MQ(0) tva
.95 .  .99.36.0.21.28    no:  21.03:=AR  (command)
.98 .  .u0.00.6.21.25      ID(1):=21.00 tva
.00 .  .03.13.0.22.24      MQ(1):=22.03
.13 .  .56.79.0.24.31      multiply
.79 .  .82.85.4.26.20      20.02.03:=PN(0.1)
.85 .  .88.97.6.22.25      ID(1):=22.02 tva
.97 .  .02.u1.0.26.31      shift 6 bits
.u1 . u.u4.04.4.25.22      22.02.03:=ID(0.1)
.04 .  .06.08.5.22.26      PN(0.1):=22.02.03
.08 .  .10.12.7.20.30      PN(0.1):=PN-20.02.03
.12 .  .16.59.5.26.21      21.00.01:=PN(0.1)
.59 .  .60.73.4.21.25      ID(0.1):=21.00.01
.73 .  .81.u3.1.01.24      MQ(1):=01.81  =10^-2
.u3 .  .58.60.0.24.31      multiply
.60 .  .64.67.4.26.21      21.00.01:=PN(0.1)
.67 . u.70.71.4.22.25      ID(0.1):=22.00.01  =denominator
.71 . u.74.75.4.21.26      PN(0.1):=21.00.01  =no
.75 .  .58.27.5.25.31      divide
.27 . u.29.30.0.24.20      20.00:=MQ(0)  =(10^-2)y
.30 .  .32.33.1.24.27      MQ(1) zero?